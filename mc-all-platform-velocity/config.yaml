name: Minecraft All-Platform Velocity Proxy
version: 0.2.9
slug: mc-all-platform-velocity
description: Proxy to allow players with any client to join the server.
url: https://github.com/uplandjacob/upland-ha-addons/tree/main/mc-all-platform-velocity
arch:
  - aarch64
  - amd64
init: false
image: ghcr.io/uplandjacob/upland-ha-addons-mc-all-platform-velocity-{arch}

map:
  - config
options:
  rootConfig:
    motd: "<#09add3>A Velocity Server"
    show-max-players: 500
    online-mode: true
    force-key-authentication: true
    prevent-client-proxy-connections: false
    player-info-forwarding-mode: "NONE"
    forwarding-secret-file: "forwarding.secret"
    announce-forge: false
    kick-existing-players: false
    ping-passthrough: "DISABLED"
    enable-player-address-logging: true
  servers: 
    - name: "lobby"
      address: "someip.local:25565"
  serverAttemptJoinOrder:
    - "lobby"
  forcedHosts:
    - hostname: "lobby.example.com"
      servNames: 
        - "lobby"
  advanced:
    compression-threshold: 256
    compression-level: -1
    login-ratelimit: 3000
    connection-timeout: 5000
    read-timeout: 30000
    haproxy-protocol: false
    tcp-fast-open: false
    bungee-plugin-message-channel: true
    show-ping-requests: false
    failover-on-unexpected-server-disconnect: true
    announce-proxy-commands: true
    log-command-executions: false
    log-player-connections: true
    accepts-transfers: false

schema:
  rootConfig:
    motd: str
    show-max-players: int
    online-mode: bool
    force-key-authentication: bool
    prevent-client-proxy-connections: bool
    player-info-forwarding-mode: match(NONE|LEGACY|BUNGEECORD|MODERN)
    forwarding-secret-file: str
    announce-forge: bool
    kick-existing-players: bool
    ping-passthrough: match(DISABLED|MODS|DESCRIPTION|ALL)
    enable-player-address-logging: bool
  servers: 
    - name: str
      address: str
  serverAttemptJoinOrder:
    - str
  forcedHosts:
    - hostname: str
      servNames:
        - str
  advanced:
    compression-threshold: int
    compression-level: int
    login-ratelimit: int
    connection-timeout: int
    read-timeout: int
    haproxy-protocol: bool
    tcp-fast-open: bool
    bungee-plugin-message-channel: bool
    show-ping-requests: bool
    failover-on-unexpected-server-disconnect: bool
    announce-proxy-commands: bool
    log-command-executions: bool
    log-player-connections: bool
    accepts-transfers: bool

ports:
  "25565": 25565
  "19132": 19132
  "8081": 8081
ports_description:
  "25565": "java edition port"
  "19132": "bedrock edition port"
  "8081": "Eaglercraft port"
